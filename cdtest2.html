<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>碰撞检测</title>
<style>
*{ margin:0; padding:0; }

</style>
</head>

<body>


<svg xmlns="http://www.w3.org/2000/svg" width="600" height="600">
	<circle cx="100" cy="100" r="40" fill="red" class="div1"></circle>
	<circle cx="400" cy="400" r="40" fill="blue" class="div2"></circle>
</svg>

<script>
var oDiv1=document.querySelectorAll('.div1')[0];
var oDiv2=document.querySelectorAll('.div2')[0];
var oY=oDiv1.getAttribute('cy');
var oX=oDiv1.getAttribute('cx');

oDiv1.onmousedown=function(ev){
	var ev=ev||event;
	var disx=ev.clientX-oX;
	var disy=ev.clientY-oY;
	
	document.onmousemove=function(ev){
		var ev=ev||event;	
		oDiv1.setAttribute('cx',ev.clientX-disx);
		oDiv1.setAttribute('cy',ev.clientY-disy);
		
		if(collide(oDiv1,oDiv2)){
			oDiv2.setAttribute('fill','red');
			
		}
	};
	document.onmouseup=function(){
		document.onmousemove=document.onmouseup=null;
	};
};

function collide(obj1,obj2){
	var oY1=obj1.getAttribute('cy');
	var oX1=obj1.getAttribute('cx');
	var oR1=obj1.getAttribute('r');
	
	var oY2=obj2.getAttribute('cy');
	var oX2=obj2.getAttribute('cx');
	var oR2=obj2.getAttribute('r');
	
	var l1=oX1;
	var t1=oY1;
	var r1=oX1+oR1*2;
	var b1=oY1+oR1*2;
	
	var l2=oX2;
	var t2=oY2;
	var r2=oX2+oR2*2;
	var b2=oY2+oR2*2;
	
	if(l1>r2 || r1<l2 || t1>b2 || b1<t2){
		return false;	
	}else{
		alert(1234)
		return true;	
	}
}

</script>
</body>
</html>
